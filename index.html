<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barra de Progresso</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter para todo o corpo */
        body {
            font-family: 'Inter', sans-serif;
            /* Garante que o HTML e o BODY não tenham margens ou preenchimentos padrão */
            margin: 0;
            padding: 0;
            /* Oculta qualquer estouro de conteúdo, garantindo que apenas o quadrado seja visível */
            overflow: hidden;
            /* Remove a altura mínima da tela para que o body se ajuste ao conteúdo */
            min-height: auto;
            /* Remove o display flex do body, pois o contêiner principal já tem seu próprio layout */
            display: block;
            background-color: transparent; /* Torna o fundo transparente para o embed */
        }

        /* Estilo para o contêiner principal do embed */
        .progress-container {
            /* Define um tamanho fixo para o quadrado */
            width: 192px; /* 48 * 4 = 192px (w-48) */
            height: 192px; /* 48 * 4 = 192px (h-48) */
            /* Centraliza o conteúdo dentro do próprio contêiner */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* Adiciona um pouco de padding interno para o conteúdo */
            padding: 24px; /* p-6 */
            /* Estilos visuais */
            background-color: #ffffff; /* bg-white */
            border-radius: 12px; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            /* Garante que o contêiner não exceda o tamanho máximo (embora fixo, é uma boa prática) */
            max-width: 192px; /* max-w-xs */
            max-height: 192px; /* max-h-xs */
        }
    </style>
</head>
<body>
    <div class="progress-container">
        <div id="counterDisplay" class="text-3xl font-semibold mb-4 text-gray-800">
            <span class="text-2xl">0</span>/30
        </div>

        <div class="w-full h-4 bg-gray-200 rounded-full overflow-hidden mb-6">
            <div id="progressBarFill" class="h-full bg-blue-500 rounded-full transition-all duration-300 ease-in-out" style="width: 0%;"></div>
        </div>

        <button id="incrementButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full shadow-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
            +
        </button>
    </div>

    <script>
        // Define a chave para armazenar o contador no localStorage
        const localStorageKey = 'progressCounter';
        const maxProgress = 30; // Valor máximo da barra de progresso

        // Tenta carregar o contador do localStorage
        let storedCounter = localStorage.getItem(localStorageKey);
        let counter;

        if (storedCounter !== null && !isNaN(parseInt(storedCounter, 10))) {
            // Se houver um valor válido no localStorage, usa-o
            counter = parseInt(storedCounter, 10);
            console.log(`Contador carregado do localStorage: ${counter}`);
        } else {
            // Caso contrário, inicia em 0
            counter = 0;
            console.log("Nenhum contador encontrado no localStorage ou valor inválido, iniciando em 0.");
        }

        // Garante que o contador não exceda o máximo permitido ao carregar
        if (counter > maxProgress) {
            counter = maxProgress;
            console.log(`Contador ajustado para o máximo (${maxProgress}) ao carregar.`);
        }

        // Obtém referências aos elementos HTML
        const counterDisplay = document.getElementById('counterDisplay');
        const progressBarFill = document.getElementById('progressBarFill');
        const incrementButton = document.getElementById('incrementButton');

        /**
         * Atualiza a exibição do contador e a largura da barra de progresso.
         * Também salva o valor atual no localStorage.
         */
        function updateProgress() {
            // Atualiza o texto do contador. O primeiro número tem um tamanho de fonte menor.
            counterDisplay.innerHTML = `<span class="text-2xl">${counter}</span>/${maxProgress}`;

            // Calcula a porcentagem de progresso
            const progressPercentage = (counter / maxProgress) * 100;
            // Atualiza a largura da barra de progresso
            progressBarFill.style.width = `${progressPercentage}%`;

            // Salva o contador no localStorage para persistência
            localStorage.setItem(localStorageKey, counter.toString());
            console.log(`Contador salvo no localStorage: ${counter}`);

            // Desabilita o botão se o contador atingir o máximo
            if (counter >= maxProgress) {
                incrementButton.disabled = true;
                incrementButton.classList.add('opacity-50', 'cursor-not-allowed'); // Estilo para botão desabilitado
            } else {
                incrementButton.disabled = false;
                incrementButton.classList.remove('opacity-50', 'cursor-not-allowed'); // Remove estilo de desabilitado
            }
        }

        // Adiciona um ouvinte de evento de clique ao botão
        incrementButton.addEventListener('click', () => {
            // Incrementa o contador, mas não permite que exceda o máximo
            if (counter < maxProgress) {
                counter++;
                updateProgress(); // Atualiza a UI e salva no localStorage
            }
        });

        // Chama updateProgress uma vez para inicializar a UI com o valor salvo (ou 0)
        updateProgress();
    </script>
</body>
</html>
